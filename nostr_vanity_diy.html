<!doctype html>
<html>
<head>
<!--<script src="https://unpkg.com/nostr-tools/lib/nostr.bundle.js"></script>-->
<script src="nostr-tools-1.7.4.js"></script>
</head>
<body>
  <h2>Noster Vanity Public Key Generator</h2>
  <form>
  Target String (3 Characters MAX) <input id="inputBox" value="ace" onfocus="this.value=''" type="text">
  </form>
  <p>If you are generating a public HEX key (that will work on Noster):</p>
  <ul>
    <li>You are limited to using hex characters: <strong>0123456789abcdef</strong></li>
    <li>Less visible, your vanity pub key MAY not be visible, defeating the purpose</li>
    <li>Faster to calculate</li>
  </ul>

  <button id="make public Hex key" onclick="genVanityHexKey()"> Create Hex pub key</button>
<hr>

  <p>If you are generating a Noster public key (npub) :</p>
  <ul>
    <li>You are limited to characters: <strong>qpzry9x8gf2tvdw0s3jn54khce6mua7l</strong></li>
    <li>Missing: b, d, i, o, and the number 1</li>
    <li>Slower to calculate</li>
  </ul>

  <button id="make npub" onclick="genVanityNpub()"> Create 'npub' key</button>
<hr>
  <p>Expectations for a computer with 3060 Graphics Card: </p>
  <ul>
    <li>1 Char: <1 second </li>
    <li>2 Char: 2 seconds </li>
    <li>3 Char: 3 seconds </li>
    <li>4 Char: browser timeout error after ~2min</li>
  </ul>

  <p>Are you sure that ALL the letters in your search string are legal characters in your method?</h2>
  <hr>
  <script>

    function genVanityNpub(){
      var pubOutbox = document.getElementById("pubPlaceholder");
      var privOutbox = document.getElementById("privPlaceholder");
      var textbox = document.getElementById("inputBox");// get the textbox element by its id
      var value = textbox.value; //get the value out of the textbox
      let target = value;
      let RESERVED = "npub1".length; //all nip19 npubs start with 'npub1'
      let myPrivKey = NostrTools.generatePrivateKey("");
      let myPubKey = NostrTools.getPublicKey(myPrivKey);
      let npub = NostrTools.nip19.npubEncode(myPubKey)
      
      while(npub.substring(RESERVED, RESERVED+target.length) !== target ){
        myPrivKey = NostrTools.generatePrivateKey("");
        myPubKey = NostrTools.getPublicKey(myPrivKey);
        npub = NostrTools.nip19.npubEncode(myPubKey)
        nsec = NostrTools.nip19.npubEncode(myPrivKey)
        //console.log(npub);
      }
      pubOutbox.innerText = npub;
      privOutbox.innerText = nsec;
    }

    function genVanityHexKey(){
      var pubOutbox = document.getElementById("pubPlaceholder");
      var privOutbox = document.getElementById("privPlaceholder");
      var textbox = document.getElementById("inputBox");// get the textbox element by its id
      var value = textbox.value; //get the value out of the textbox
      let target = value;
      let RESERVED = 0; 
      let myPrivKey = NostrTools.generatePrivateKey("");
      let myPubKey = NostrTools.getPublicKey(myPrivKey);

      while(myPubKey.substring(RESERVED, RESERVED+target.length) !== target ){
        myPrivKey = NostrTools.generatePrivateKey("");
        myPubKey = NostrTools.getPublicKey(myPrivKey);
        //console.log(myPubKey);
      }
      pubOutbox.innerText = myPubKey;
      privOutbox.innerText = myPrivKey;
    }

  </script>
  <h3>Public Key</h3>
  <p id="pubPlaceholder"></p>

  <h3>Private Key</h3>
  <p id="privPlaceholder"></p>
</body>
</html>

